## 笔记
## [[U1二进制编码]]

## [[U2数字逻辑电路基础]]

## [[U3组合逻辑电路]]

## [[U4时序逻辑电路]]

## [[U6 运算]]

## [[U7 指令系统]]

## [[U8 中央处理器]]

## 考试内容

- 题目组成：
	- （概念）选择判断：20 '
	- 组合逻辑设计：10‘
	- 时序逻辑设计：10‘
	- （半开放）论述：10‘
	- 指令与 CPU：40’

## 重要概念

- 翻译程序 (Translator)有三类： 
	- 汇编程序 (Assembler)：汇编语言源程序→机器目标程序
	- 编译程序 (Complier)：高级语言源程序→汇编/机器目标程序
	- 解释程序 (Interpreter )：将高级语言语句逐条翻译成机器指令并立即执行, 不生成目标文件。

- 组成部件：
	- **存储器**存放数据、指令，都是二进制，但能区分；
	- **控制器**自动取出指令来执行；
	- **运算器**进行算术逻辑等运算；
	- 通过**输入设备、输出设备**和主机进行通信。
	- ![image.png|500](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240107195556.png)

- 工作方式：**存储程序**

- ISA 指令集体系结构
- 规定了如何使用硬件
	- 核心是**指令系统**，包括**指令格式、操作种类**以及每种操作对应的操作数的相应规定；指令可以接受的**操作数的类型**；指令中操作数的**寻址方式**；
	- 操作数所能存放的寄存器的名称、编号、长度和用途；
	- 操作数所能存放的存储空间的大小和编址方式；
	- 操作数在存储空间存放时按照大端还是小端方式存放；
	- 指令执行过程的控制方式，包括程序计数器、条件码定义等。

- 在机器内部编码后的数称为**机器数**，其值称为**真值**
- 定义数值数据有三个要素：**进制、定点/浮点、编码**

- 浮点数的**范围**：与**阶码的位数和基的大小**有关
- 浮点数的**精度**：与**尾数的位数和是否规格化**有关

- **对偶定律**：
  - 对于原式 Y，将 `·` 和 `+` 以及 `0` 和 `1` 互换，得到对偶式 $Y^D$
  - 若两个逻辑表达式相等，则它们的对偶式也相等
  - 注意要操持**运算次序**不变（这可能需要添加括号）
    - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230921104338040.png" alt="image-20230921104338040" style="zoom:50%;" />

- **逻辑门**是最基础的数字电路，可通过**CMOS 晶体** 管实现

- 无关项指输出取值可**任意的项**，真值表中用 d 表示，可用于化简
- 非法值指**同时被高、低电平驱动**的输出结点的值。
- 高阻态是三态门输出结点的一种非正常逻辑态，相当于“**断开**”

- 组合逻辑电路可以是两级电路或多级电路，两级电路的传输时间短，但占用集成电路物理空间更多，需进行**时空权衡**

- 传输延迟：**关键路径**上所有元件的传输延迟之和
- 最小延迟：**最短路径**上所有元件的最小延迟之和

![[U4时序逻辑电路#存储器]]

- 寻址方式：**立即 / 寄存器 / 寄间 / 直接 / 间接 / 偏移**/ 堆栈

- 按指令格式的复杂度来分
  - 复杂指令集计算机 CISC 
    - 指令系统复杂: 变长、寻址方式多、格式多
    - 指令周期长
    - 各种指令**都能访问存储器**
    - 采用微程序控制
    - 有专用寄存器
    - 难以进行编译优化来生成高效目标代码
    - 日趋庞大的指令系统不但使计算机的研制周期变长，而且难以保证设计的正确性，难以调试和维护，并且因指令操作复杂而增加机器周期，从而**降低了系统性能**。
    - 在程序中各种指令出现的频率悬殊很大，最常使用的是一些简单指令，这些指令占程序的 80%，但只占指令系统的 20%。而且在微程序控制的计算机中，占指令总数 20%的复杂指令占用了控制存储器容量的 80%。

  - 精简指令集计算机 RISC
    - 简化的指令系统：指令少 / 寻址方式少 / 指令格式少 / 指令长度一致
    - 以**装入/存储**方式工作：除了 loard/store 之外**只访问寄存器**
    - 采用大量**通用寄存器**，以减少访存次数
    - 采用组合逻辑电路控制，不用或少用微程序控制
    - 采用优化的编译系统，力求有效地支持高级语言程序

- 需要了解的指令
	- ![image.png|500](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240108145906.png)
	- 位移：sll、srl、sra

- CPU 设计直接决定了**时钟周期宽度和 CPI**，对计算机性能非常重要！

- CPU 主要由数据通路和控制器组成
	- **数据通路**：实现指令集中所有指令的操作功能
		- **操作元件**（组合电路）：ALU、MUX、扩展器、Adder、Reg/Mem Read 等
		- **状态 / 存储元件**（时序电路）：PC、Reg/Mem Write
	- **控制器**：控制数据通路中各部件进行正确操作
		- 汇总每条指令控制信号的取值，生成真值表，写出逻辑表达式，设计控制器逻辑——**控制单元对指令进行译码**，与指令执行得到的条件码或当前机器的状态、时序信号（时钟）等组合，生成**对数据通路进行控制的控制信号**。

- **用户可见寄存器（用户可使用）** 
	- **通用寄存器**：用来存放地址或数据，需在指令中明显给出 
	- **专用寄存器**：用来存放特定的地址或数据，无需在指令中明显给出 
	- 标志 (条件码)寄存器、程序计数器 **PC**：部分可见。由 CPU 根据指令执行结果设定，只能以隐含方式读出其中若干位，用户程序（非内核程序）不能改变
- **控制和状态寄存器（用户不可使用）** 
	- 指令寄存器 IR 
	- 存储器地址寄存器 MAR 
	- 存储器缓冲 (数据)寄存器 MBR / MDR 
	- 程序状态字寄存器 PSWR 
	- 临时寄存器：用于存放指令执行过程中的临时信息 
	- 其他寄存器：如，进程控制块指针、系统堆栈指针、页表指针等

- 三种下地址情况
	- ![image.png|475](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240108163736.png)

- CPU 的主要功能
	- 周而复始**执行指令**
	- 执行指令过程中，若发现异常情况，则转**异常处理**
	- 每个指令结束，查询有没有中断请求，有则**响应中断**

- 指令执行过程
	- **取指、译码、取数、运算、存结果、查中断**
	- 指令周期：取出并**执行一条指令的时间**，由**若干个时钟周期**组成
	- 时钟周期：CPU 中用于信号同步的信号，是 CPU **最小的时间单位**

- 数据通路的定时方式
	- 现代计算机都采用时钟信号进行定时
	- 一旦时钟有效信号到来，数据通路中的状态单元可以开始写入信息
	- 如果状态单元每个周期都更新信息，则无需加“写使能”控制信号，否则，需加“写使能”控制信号，以使必要时控制信息写入寄存器

- 数据通路中信息的流动过程
	- 每条指令在取指令阶段和指令译码阶段都一样
	- 每条指令的功能不同，故在数据通路中所经过的部件和路径可能不同
	- 数据在数据通路中的流动过程**由控制信号确定**
	- 控制信号由控制器根据指令代码来生成

- **单周期**处理器的设计
	- 每条指令都在**一个时钟周期**内完成
	- 时钟周期以最长的 Load 指令所花时间为准
	- 无需加临时寄存器存放指令执行的中间结果
	- 同一个功能部件**不能重复使用** 
	- **控制信号在整个指令执行过程中不变**，所以控制器设计简单，只要写出指令和控制信号之间的真值表，就可以设计出控制器
- **多周期**处理器的设计
	- 每条指令分成**多个阶段**，每个阶段在一个时钟内完成
	- 时钟周期以**最长的阶段**所花时间为准
	- 不同指令包含的时钟个数不同
	- 阶段的划分要均衡，每个阶段只能完成一个独立、简单的功能
	- 需加**临时寄存器**存放指令执行的**中间结果**
	- 同一个**功能部件**能在不同的时钟中被**重复使用**
	- 可用**有限状态机**表示指令执行流程，并用 PLA 或微程序方式设计控制器
- **流水线 CPU 的设计
	- 将每条指令的执行规整化为**若干个同样的流水阶段**
	- 每个流水阶段的执行时间一样，都等于一个时钟
	- 理想情况下，每个时钟有一条指令进入流水线，也有一条指令执行结束 （指令吞吐率增大、CPI 约等于 1、单条指令实际所需时间增大）
	- 每两个相邻流水段之间的**流水段寄存器**，用以记录所有在后面阶段要用到的各种信息（包括指令译码得到的控制信号）

- **数据冒险**（数据相关）：**前面指令的结果是后面指令的操作数**
	- 软件阻塞（加 nop 指令）、硬件阻塞（插入“气泡”）
	- 寄存器前半周期写后半周期读、编译优化、“**转发**”（旁路）
	- 对于 load-use，采用“**阻塞加转发**”的方式解决数据冒险

- **控制冒险**（控制相关）：目标指令地址产生前已经有指令被取到流水线中，如果这些指令不该被执行，则发生控制冒险。
	- 软件阻塞、硬件阻塞、延迟分支技术
	- 采用“**分支预测**”技术：静态预测或动态预测
	- 异常和中断也是一种特殊的控制冒险

## 重要题目

![[归档课程/数字逻辑与计算机组成/作业/p2#卡诺图化简|p2]]

### 组合逻辑电路设计
- **功能分析-列表-化简-逻辑表达式-画图-评价 (竞争&毛刺)**

![[归档课程/数字逻辑与计算机组成/作业/p3#9|p3]]
### 时序逻辑电路设计
- **功能分析-状态图-状态化简和编码-逻辑表达式-画图-评价**
- ![image.png](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240109002717.png)
- ![image.png](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240109002737.png)
 
### 其它题目

![[归档课程/数字逻辑与计算机组成/作业/p3#11.|p3]]
![[第一章作业答案 - 2.pdf#page=4&selection=43,0,46,2|第一章作业答案 - 2, page 4]]
- 没有明确说明的情况下，就**没有规格化，没有隐藏位**，阶码也无需专门留给 0、无穷大、非数等。

![[第七章作业答案.pdf#page=8&selection=2,0,4,1|第七章作业答案, page 8]]

![image.png](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240109110935.png)



### [[数电样卷.pdf]]