### 三 uv 映射
- 把一个通用的材质贴图赋予给一个经过拉伸的模型，比如山体之类，会发现贴图也被拉伸了
	- 或者原模型没有 uv
	- 这就可以通过三 UV 映射来解决
	- ![image.png|400](https://thdlrt.oss-cn-beijing.aliyuncs.com/undefined20241213214438.png)
- 在三个平面分别采样，之后融合在一起，而不使用模型自身的 uv
- 三平面UV 映射的核心原理是通过在模型的三个主要平面（X、Y、Z轴）上**分别投射纹理**，并根据表面法线的方向混合这些纹理
![image.png](https://thdlrt.oss-cn-beijing.aliyuncs.com/undefined20241213220935.png)
## 真实感材质

### 通用材质模型
- 能够描述大部分的现实材质类型
#### Microfacet
- 假设物体表面由许多微小的、理想的反射面组成
- $\omega_{m}$ 表示微表面的法线发型，$n$ 表示宏观标签法线方向
	- 通过调整微表面法线方向来模拟光线在真实物体表面的复杂反射、折射和散射行为
- BRDF： $f_\mathrm{r}\left(\boldsymbol{\omega}_\mathrm{o},\boldsymbol{\omega}_\mathrm{i}\right)=\frac{\mathrm{NDF}(\boldsymbol{\omega}_\mathrm{h})G(\boldsymbol{\omega}_\mathrm{o},\boldsymbol{\omega}_\mathrm{i})F(\boldsymbol{\omega}_\mathrm{o})}{4(n\cdot\boldsymbol{\omega}_\mathrm{o})(\boldsymbol{n}\cdot\boldsymbol{\omega}_\mathrm{i})}$
	- $\omega_{0}$ 表是光线出射方向
	- $\omega_{i}$ 是光线入射方向
	- $\omega_{h}$ 是半程向量
	- $n$ 表示宏观表面的法线方向
	- $NDF$ 法线分布函数定义表面上法线在各个方向上的分布状况
	- $G$ 模拟表面的互相集合遮挡与阴影
	- $F$ 菲涅尔项描述光线进入不同介质时反射率随着入射角度不同时的变化情况
#### Microflake
- Microflake 模型难以处理织物、珠光等具有各向异性结构的**体积或半透明材质**
- 该模型是一个基于**双面镜面反射的片状模型**，通过模拟这些片元的分布来决定材质，可以很好的表示材质的各向异性
	- ![image.png|350](https://thdlrt.oss-cn-beijing.aliyuncs.com/undefined20250309151221.png)
	- 不同方向上具有不同的相位函数及消光系数
- **相位函数**：描述光在散射过程中**方向变化**的函数，表示收入射光的方向与散射光的方向之间的关系 $f_{\mathfrak{p}}\left(\boldsymbol{\omega}_\mathrm{i}\to\boldsymbol{\omega}_\mathrm{o}\right)$
- **消光系数**：描述光在传播  过程中由于吸收和散射作用导致光强减弱的度量，即介质对光线总的“阻碍”能力 $\sigma_{\mathrm{t}}\left(\omega\right)$
- 满足互异性：$\sigma_\mathrm{t}\left(\boldsymbol{\omega}_\mathrm{i}\right)f_\mathrm{p}\left(\boldsymbol{\omega}_\mathrm{i}\to\boldsymbol{\omega}_\mathrm{o}\right)=\sigma_\mathrm{t}\left(\boldsymbol{\omega}_\mathrm{o}\right)f_\mathrm{p}\left(\boldsymbol{\omega}_\mathrm{o}\to\boldsymbol{\omega}_\mathrm{i}\right)$
	- 能量守恒：$\int_{S^2}f_{\mathrm{p}}\left(\boldsymbol{\omega}_{\mathrm{i}}\to\boldsymbol{\omega}_{\mathrm{o}}\right)\mathrm{d}\boldsymbol{\omega}_{\mathrm{o}}=1$
- ![image.png|400](https://thdlrt.oss-cn-beijing.aliyuncs.com/undefined20250309152336.png)
#### Micrograin
- 用于模拟多孔隙材质，明确的模拟了微晶粒的分布
- 描述多孔层和平整材质结合产生的 BRDF 建模为不透明的半椭球在任意平整材质上的分布
- ![image.png|400](https://thdlrt.oss-cn-beijing.aliyuncs.com/undefined20250309152648.png)

#### Layered